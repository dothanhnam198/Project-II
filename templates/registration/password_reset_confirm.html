{% extends "admin/base.html" %}
{% load i18n static others %}

{% block bodyclass %}{{ block.super }} login{% endblock %}

{% block usertools %}{% endblock %}

{% block nav-global %}{% endblock %}

{% block content_title %}{% endblock %}

{% block breadcrumbs %}{% endblock %}

{% block extrastyle %}
    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="/static/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/bower_components/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/static/dist/css/AdminLTE.min.css">
    <link rel="stylesheet" href="/static/dist/css/skins/_all-skins.min.css">
    <link rel="stylesheet" href="/static/styles/site.css">
{% endblock %}

{% block content %}

<style type="text/css">
    .register {
        padding: 5px 15px;
        background-color: #008CBA;
        color: white;
        border: 2px solid #008CBA;
     }
       .form-signup {
    width: 100%;
    max-width: 330px;
    padding: 20px;
    background-color: white;
    margin: auto;
    }
  .form-signup .form-control {
    position: relative;
    box-sizing: border-box;
    height: auto;
    padding: 1px;
    font-size: 12px;
  }
  .form-signup .form-control:focus {
    z-index: 2;
  }
  .form-signup input[type="email"] {
    margin-bottom: 10px;
    border-bottom-right-radius: 0;
    border-bottom-left-radius: 0;
  }
    .form-signup input[type="text"] {
    margin-bottom: 10px;
    border-bottom-right-radius: 0;
    border-bottom-left-radius: 0;
  }
  .form-signup input[type="password"] {
    margin-bottom: 10px;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
  }

</style>
<form class="form-signup" id='addUser'method="post">{% csrf_token %}
    <h4 class="text-center text-info title ">Khôi phục mật khẩu</h4>
        <div class="form-group">
            <label class="" >Mật khẩu</label>
                    <input type="password" name="password1" id="password1" class="form-control" required autofocus>
        </div>
    <div class="form-group">
            <label class="" >Xác thực mật khẩu</label>
                    <input type="password" name="password2" id="password2" class="form-control" required autofocus>
        </div>
    <div style="text-align:center;">
            <button class="register" id='password_reset_confirm'type="button">Xác nhận</button>
    </div>
</form>
    <script src="/static/bower_components/jquery/dist/jquery.min.js"></script>

<script src="/static/services/app-services.js"></script>
<script src="/static/services/addUser-services.js"></script>
<script>
    $(document).on('click', '#password_reset_confirm', function () {
        debugger
        var add_user = new addUser();
        let new_user = {
            password: $('input[name=password1]').val(),
            password2: $('input[name=password2]').val(),
        }
        add_user.password_reset_confirm(JSON.stringify(new_user))
            .then(res => {
                debugger
                location.href = "/login/?next=/";
            })
            .catch(err => {
                console.log(err);
            })
    })
</script>
{% endblock content %}